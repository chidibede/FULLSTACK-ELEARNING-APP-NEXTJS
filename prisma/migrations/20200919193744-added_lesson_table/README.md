# Migration `20200919193744-added_lesson_table`

This migration has been generated by Chidi Enwereji at 9/19/2020, 8:37:44 PM.
You can check out the [state of the schema](./schema.prisma) after the migration.

## Database Steps

```sql
ALTER TABLE "public"."Course" DROP COLUMN "content",
ADD COLUMN "description" text   ,
ADD COLUMN "imgUrl" text   

ALTER TABLE "public"."StudentOnCourses" ADD COLUMN "isCompleted" boolean   NOT NULL DEFAULT false

CREATE TABLE "public"."Lesson" (
"id" SERIAL,
"number" integer   NOT NULL ,
"title" text   NOT NULL ,
"content" text   NOT NULL ,
"contentUrl" text   ,
"courseId" integer   NOT NULL ,
PRIMARY KEY ("id")
)

ALTER TABLE "public"."Lesson" ADD FOREIGN KEY ("courseId")REFERENCES "public"."Course"("id") ON DELETE CASCADE ON UPDATE CASCADE
```

## Changes

```diff
diff --git schema.prisma schema.prisma
migration 20200918224051-added_created-at_column..20200919193744-added_lesson_table
--- datamodel.dml
+++ datamodel.dml
@@ -2,9 +2,9 @@
 // learn more about it in the docs: https://pris.ly/d/prisma-schema
 datasource db {
   provider = "postgresql"
-  url = "***"
+  url = "***"
 }
 generator client {
   provider = "prisma-client-js"
@@ -13,15 +13,27 @@
 model Course {
   id           Int                @default(autoincrement()) @id
   createdAt    DateTime           @default(now())
   title        String
-  content      String?
+  description  String?
   published    Boolean            @default(false)
   instructor   Instructor         @relation(fields: [instructorId], references: [id])
   instructorId Int
   students     StudentOnCourses[]
+  imgUrl       String?
+  lessons      Lesson[]
 }
+model Lesson {
+  id         Int     @default(autoincrement()) @id
+  number     Int
+  title      String
+  content    String
+  contentUrl String?
+  course     Course  @relation(fields: [courseId], references: [id])
+  courseId   Int
+}
+
 model Instructor {
   id        Int      @default(autoincrement()) @id
   email     String   @unique
   name      String?
@@ -46,9 +58,10 @@
   studentId Int
   course    Course  @relation(fields: [courseId], references: [id])
   courseId  Int
   @@id([studentId, courseId])
-  createdAt DateTime @default(now())
+  isCompleted Boolean  @default(false)
+  createdAt   DateTime @default(now())
 }
 model Admin {
   id        Int      @default(autoincrement()) @id
```


